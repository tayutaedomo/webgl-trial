<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Video to Canvas</title>
</head>
<body>
<p>
  Refer: <a href="https://sterfield.co.jp/designer/videoタグの動画をcanvasを使って表示する/" target="_blank">https://sterfield.co.jp/designer/videoタグの動画をcanvasを使って表示する/</a>
</p>

<video controls id="v" width="480px" height="270px">
  <source src="http://vjs.zencdn.net/v/oceans.mp4" width="480px" height="270px">
</video>

<div>
  <button onClick="drawVideo()">Scan</button>
  <canvas id="c" width="300px" height="168px"></canvas>

  <button onClick="outputVideo1()">output</button>
  <canvas id="c2" width="300px" height="168px"></canvas>

  <button onClick="outputVideo2()">output2</button>
  <canvas id="c3" width="300px" height="168px"></canvas>
</div>

<script type="text/javascript">
  function drawVideo(){
    var video = document.getElementById("v");
    var canvas = document.getElementById("c");
    canvas.getContext("2d").drawImage(video, 0, 0, 300, 168);
  }

  function outputVideo1(){
    var video = document.getElementById("v");

    video.addEventListener("timeupdate", function() {
      var canvas = document.getElementById("c2");
      canvas.getContext("2d").drawImage(video, 0, 0, 300, 168);
    }, true);
  }

  function outputVideo2(){
    var video = document.getElementById("v");

    setInterval(function(){
      var canvas = document.getElementById("c3");
      canvas.getContext("2d").drawImage(video, 0, 0, 300, 168);
    }, 1000/30);
  }
</script>
</body>
</html>

