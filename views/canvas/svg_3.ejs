<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Canvas SVG</title>
</head>
<body>
  <!--<p><canvas id="canvas" style="border:2px solid black;" width="256" height="256"></canvas></p>-->
  <script>
    var text = "　吾輩は猫である。名前はまだ無い。<br/>　どこで生れたか頓（とん）と見當がつかぬ。何でも薄暗いじめじめした所でニヤーニヤー泣いて居た事丈は記憶して居る。吾輩はこゝで始めて人間といふものを見た。然（しか）もあとで聞くとそれは書生といふ人間中で一番獰悪（だうあく）な種族であつたさうだ。此書生といふのは時々我々を捕（つかま）へて煮て食ふといふ話である。然し其當時は何といふ考（かんがへ）もなかつたから別段恐しいとも思はなかつた。但（たゞ）彼の掌（てのひら）に載せられてスーと持ち上げられた時何だかフハフハした感じが有つた許（ばか）りである。掌の上で少し落ち付いて書生の顔を見たのが所謂（いはゆる）人間といふものゝ見始（みはじめ）であらう。此時妙なものだと思つた感じが今でも殘つて居る。第一毛を以て装飾されべき筈の顔がつるつるして丸で薬罐（やくわん）だ。其後猫にも大分逢つたがこんな片輪には一度も出會（でく）はした事がない。加之（のみならず）顔の眞中が餘りに突起して居る。そうして其穴の中から時々ぷうぷうと烟（けむり）を吹く。どうも咽（む）せぽくて實に弱つた。是が人間の飲む烟草（たばこ）といふものである事は漸く此頃（このごろ）知つた。";

    (function render() {
      //var canvas = document.getElementById("canvas");
      var canvas = document.createElement('canvas');
      canvas.style.border = '2px solid black';
      //canvas.style.width = 256 + 'px';
      //canvas.style.height = 256 + 'px';
      canvas.width = 256;
      canvas.height = 256;
      document.body.appendChild(canvas);

      var ctx = canvas.getContext("2d");

      var data = "<svg xmlns='http://www.w3.org/2000/svg' width='256' height='256'>" +
        "<foreignObject width='100%' height='100%'>" +
        "<div xmlns='http://www.w3.org/1999/xhtml' style='font-size:12px; text-align:center'>" +
        text +
        "</div>" +
        "</foreignObject>" +
        "</svg>";

      var svg = new Blob([data], {type: "image/svg+xml;charset=utf-8"});
      var DOMURL = self.URL || self.webkitURL || self;
      var url = DOMURL.createObjectURL(svg);

      var img = new Image();
      img.onload = function() {
        ctx.drawImage(img, 0, 0);
        DOMURL.revokeObjectURL(url);
      };
      img.src = url;
    })();

    (function render2() {
      var canvas = document.createElement('canvas');
      canvas.style.border = '2px solid black';
      canvas.width = 256;
      canvas.height = 256;
      document.body.appendChild(canvas);

      var ctx = canvas.getContext("2d");

      var data = "<svg xmlns='http://www.w3.org/2000/svg' width='512' height='512'>" +
        "<foreignObject width='100%' height='100%'>" +
        "<div xmlns='http://www.w3.org/1999/xhtml' style='font-size:12px; text-align:center'>" +
        text +
        "</div>" +
        "</foreignObject>" +
        "</svg>";

      var svg = new Blob([data], {type: "image/svg+xml;charset=utf-8"});
      var DOMURL = self.URL || self.webkitURL || self;
      var url = DOMURL.createObjectURL(svg);

      var img = new Image();
      img.onload = function() {
        ctx.drawImage(img, 0, 0);
        DOMURL.revokeObjectURL(url);
      };
      img.src = url;
    })();

  </script>
</body>
</html>

